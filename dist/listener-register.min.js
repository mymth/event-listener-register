!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).listenerRegsiter={})}(this,function(e){"use strict";const t=new WeakMap;function n(e,t){const n=e.indexOf(".");return n<0?[e,"string"==typeof t?t:void 0]:[e.slice(0,n),e.slice(n+1)]}function r(e){return!!("object"==typeof e?e.capture:e)}function i(e,t={}){return(!t.name||t.name===e.name)&&((!t.type||t.type===e.type)&&((!t.fn||t.fn===e.fn)&&(void 0===t.capture||t.capture===r(e.options))))}function o(e,t,r,i){const o="string"==typeof i[1]&&void 0===i[2]?[i[0],void 0,i[1]]:i,[s,c]=n(r,o[2]),[u,f]=o;return t.addEventListener(s,u,f),[...e,{type:s,fn:u,options:f,name:c}]}function s(e,t,o,s){let c;if(s){const[e,t]=n(o,s[0]),i="function"==typeof s[0]?s[0]:void 0,u=i&&!t?r(s[1]):void 0;c={name:t,type:e,fn:i,capture:u}}return e.reduce((e,n)=>(!c||i(n,c)?t.removeEventListener(n.type,n.fn,n.options):e.push(n),e),[])}function c(e,t,n){const r=n[0].split(" "),i=n.slice(1);return r.length>1?r.reduce((e,n)=>o(e,t,n,i),e):o(e,t,r[0],i)}function u(e,t,n){const r=n.slice(1);return n[0].split(" ").reduce((e,n)=>s(e,t,n,r),e)}e.addListener=function(e,n,r,i,o){let s=t.get(e)||[];s="string"==typeof n?c(s,e,[n,r,i,o]):Array.isArray(n)?n.reduce((t,n)=>c(t,e,n),s):Object.entries(n).reduce((t,n)=>c(t,e,n),s),t.set(e,s)},e.getListeners=function(e,n={}){const r=t.get(e);return r?r.filter(e=>i(e,n)):[]},e.removeListener=function(e,n,r,i){let o=t.get(e);o&&(o=void 0===n?s(o,e):"string"==typeof n?u(o,e,[n,r,i]):Array.isArray(n)?n.reduce((t,n)=>u(t,e,Array.isArray(n)?n:[n]),o):Object.entries(n).reduce((t,n)=>u(t,e,n),o),t.set(e,o))},Object.defineProperty(e,"__esModule",{value:!0})});